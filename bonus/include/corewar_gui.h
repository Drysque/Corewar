#ifndef COREWAR_GUI_H
#define COREWAR_GUI_H

#include <stdlib.h>
#include <unistd.h>
#include <stdio.h>
#include <string.h>
#include <time.h>

#include <SFML/Config.h>
#include <SFML/Window/Mouse.h>
#include <SFML/Window/Window.h>
#include <SFML/Graphics.h>
#include <SFML/Window/Export.h>

#include "vm.h"
#include "op.h"
#include "my.h"

#define sfGrey (sfColor){41, 41, 41, 255}

const char tab[20][100] = {
    "100101011010101101010101010101010100110011001011001001101001010101001",
    "100101011010101101010101010101010100110011001011001001101001010101001",
    "100101011010101101010101010101010100110011001011001001101001010101001",
    "100101011010101101010101010101010100110011001011001001101001010101001",
    "100101011010101101010101010101010100110011001011001001101001010101001",
    "100101011010101101010101010101010100110011001011001001101001010101001",
    "100101011010101101010101010101010100110011001011001001101001010101001",
    "100101011010101101010101010101010100110011001011001001101001010101001",
    "100101011010101101010101010101010100110011001011001001101001010101001",
    "100101011010101101010101010101010100110011001011001001101001010101001",
    "100101011010101101010101010101010100110011001011001001101001010101001",
    "100101011010101101010101010101010100110011001011001001101001010101001",
    "100101011010101101010101010101010100110011001011001001101001010101001",
    "100101011010101101010101010101010100110011001011001001101001010101001",
    "100101011010101101010101010101010100110011001011001001101001010101001",
    "100101011010101101010101010101010100110011001011001001101001010101001",
    "100101011010101101010101010101010100110011001011001001101001010101001",
    "100101011010101101010101010101010100110011001011001001101001010101001",
    "100101011010101101010101010101010100110011001011001001101001010101001",
    "100101011010101101010101010101010100110011001011001001101001010101001",
};

typedef struct cgui_s
{
    sfRenderWindow *win;
    sfRectangleShape *rect;
    sfText *text;
    sfFont *font;

    int limit_cycles;
    int current_cycle;
    int cycle_to_die;
    int nb_process;
    int nb_players;
    char players_names[4][100];
    int last_live[4];
    int live_in_the_current_period[4];
} cgui_t;

bool check_end(environment_t *env);
void check_cycles(environment_t *env);
int run_instruction(environment_t *env);
void init_processes(environment_t *env);

#endif